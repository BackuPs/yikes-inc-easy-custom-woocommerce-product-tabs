function yikes_woo_handle_reusable_tabs(){var a={action:"yikes_woo_fetch_reusable_tab",security_nonce:repeatable_custom_tabs.fetch_reusable_tab_nonce};jQuery.post(repeatable_custom_tabs.ajaxurl,a,function(a){if("undefined"!=typeof a.success&&a.success===!0)if("undefined"!=typeof a.data&&"undefined"!=typeof a.data.message)yikes_woo_display_feedback_messages(".add_tabs_container","yikes_woo_tab_error_message",a.data.message,{inline:!1,css_string:"float: right;"});else{var b=JSON.parse(a.data);lity_html=create_lity_manage_reusable_tabs_html(b),global_lity=lity(lity_html)}else"undefined"!=typeof a.success&&a.success===!1&&console.log(a);jQuery("#_yikes_wc_apply_a_saved_tab").removeClass("disabled")})}function create_lity_manage_reusable_tabs_html(a){var b=1,c="";return c+='<div class="display_saved_tabs_lity">',c+='<div class="yikes_wc_lity_header">',c+="<span> Choose a Tab </span>",c+="</div>",jQuery.each(a,function(a,d){c+='<div id="saved_tab_container_'+b+'" data-tab-id='+d.tab_id+">",c+='<div style="display:none;" id="yikes_woo_saved_tab_content_'+b+'">',c+=d.tab_content,c+="</div>",c+='<div class="yikes_wc_lity_col_title">',c+='<span class="yikes_woo_saved_tab_title_lity" id="yikes_woo_saved_tab_title_'+b+'">',c+=d.tab_title,c+="</span>",c+="</div>",c+='<div class="yikes_wc_lity_col_select">',c+='<span class="yikes_woo_saved_tab_selector_lity dashicons dashicons-plus-alt" data-saved-tab-number= "'+b+'"></span>',c+="</div>",c+="</div>",b++}),c+="</div>"}function yikes_woo_toggle_reusable_override_overlay(a,b){"disable"===a?(jQuery("#qt__yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"_toolbar").addClass("yikes_woo_using_reusable_tab"),jQuery("#_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b).addClass("yikes_woo_using_reusable_tab"),jQuery("#wp-_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"-media-buttons").addClass("yikes_woo_using_reusable_tab"),jQuery("#wp-_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"-editor-container").children(".mce-container").children(".mce-container-body").children(".mce-toolbar-grp").addClass("yikes_woo_using_reusable_tab"),jQuery("#wp-_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"-editor-container").children(".mce-tinymce").children(".mce-container-body").children(".mce-edit-area").addClass("yikes_woo_using_reusable_tab"),jQuery("._yikes_wc_custom_repeatable_product_tabs_tab_title_"+b+"_field").addClass("yikes_woo_using_reusable_tab")):(jQuery("#qt__yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"_toolbar").removeClass("yikes_woo_using_reusable_tab"),jQuery("#_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b).removeClass("yikes_woo_using_reusable_tab"),jQuery("#wp-_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"-media-buttons").removeClass("yikes_woo_using_reusable_tab"),jQuery("#wp-_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"-editor-container").children(".mce-container").children(".mce-container-body").children(".mce-toolbar-grp").removeClass("yikes_woo_using_reusable_tab"),jQuery("#wp-_yikes_wc_custom_repeatable_product_tabs_tab_content_"+b+"-editor-container").children(".mce-tinymce").children(".mce-container-body").children(".mce-edit-area").removeClass("yikes_woo_using_reusable_tab"),jQuery("._yikes_wc_custom_repeatable_product_tabs_tab_title_"+b+"_field").removeClass("yikes_woo_using_reusable_tab"))}function yikes_woo_check_for_reusable_tabs_and_disable(){jQuery(".yikes_wc_override_reusable_tab_container").each(function(){if(1==jQuery(this).data("reusable-tab")){var a=jQuery(this).children("._yikes_wc_override_reusable_tab").data("tab-number");yikes_woo_toggle_reusable_override_overlay("disable",a)}})}function yikes_woo_add_another_tab(a){yikes_woo_toggle_controls("disable"),jQuery("#add_another_tab").parent(".add_tabs_container").removeClass("_yikes_wc_add_tab_center");var b=jQuery("#duplicate_this_row"),c=parseInt(jQuery("#number_of_tabs").val())+parseInt(1),d=jQuery("#duplicate_this_row .remove_this_tab"),e=jQuery("#duplicate_this_row .button-holder"),f="_yikes_wc_custom_repeatable_product_tabs_tab_content_"+c,g="_yikes_wc_custom_repeatable_product_tabs_tab_title_"+c;b.children("p").each(function(){jQuery(this).clone().insertBefore("#duplicate_this_row").removeClass("hidden_duplicator_row_title_field hidden_duplicator_row_content_field").addClass("new_duplicate_row")}).promise().done(function(){jQuery(".new_duplicate_row").removeClass("_yikes_wc_override_reusable_tab_container_duplicate").children("#_yikes_wc_override_reusable_tab_duplicate").attr("id","_yikes_wc_override_reusable_tab_"+c).attr("data-tab-number",c),jQuery(".new_duplicate_row").children("._yikes_wc_override_reusable_tab_label_duplicate").attr("for","_yikes_wc_override_reusable_tab_"+c).attr("id","_yikes_wc_override_reusable_tab_label_"+c).removeClass("_yikes_wc_override_reusable_tab_label_duplicate").addClass("_yikes_wc_override_reusable_tab_label"),jQuery(".new_duplicate_row").children("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_action_duplicate").attr("name","_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+c+"_action").attr("id","_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+c+"_action"),jQuery(".new_duplicate_row").children("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_duplicate").attr("name","_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+c).attr("id","_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+c),jQuery(".new_duplicate_row").find("input").each(function(){jQuery(this).is('input[name="hidden_duplicator_row_title"]')&&jQuery(this).attr("name",g).removeClass("yikes_woo_tabs_title_field_duplicate").attr("id",g).parents("p").addClass(g+"_field").removeClass("hidden_duplicator_row_title_field").find("label").removeAttr("for").attr("for",g+"_field")}),jQuery(".new_duplicate_row").find("textarea").each(function(){jQuery(this).is('textarea[name="hidden_duplicator_row_content"]')&&jQuery(this).attr("name",f).attr("id",f).parents("p").addClass(f+"_field").removeClass("hidden_duplicator_row_content_field").find("label").removeAttr("for").attr("for",f+"_field")}),jQuery("#number_of_tabs").val(c),c>1&&jQuery(".new_duplicate_row").first().before('<div class="yikes-woo-custom-tab-divider"></div>')}),jQuery("#_yikes_wc_override_reusable_tab_container_duplicate").first().attr("id","_yikes_wc_override_reusable_tab_container_"+c),e.clone().insertAfter(jQuery("#_yikes_wc_override_reusable_tab_container_"+c)).addClass("last-button-holder"),d.clone().prependTo(".last-button-holder").removeAttr("style"),console.log(jQuery("#_yikes_wc_override_reusable_tab_container_"+c)),jQuery(".last-button-holder").removeAttr("alt").attr("alt",c),jQuery("."+f+"_field").html(repeatable_custom_tabs.loading_gif),yikes_woo_get_wp_editor_ajax(f,!0,a),jQuery(".last-button-holder").removeClass("last-button-holder"),jQuery(".new_duplicate_row").removeClass("new_duplicate_row")}jQuery(document).ready(function(){setTimeout(function(){yikes_woo_check_for_reusable_tabs_and_disable()},4e3),jQuery(".yikes-tabs-how-to-toggle").on("click",function(a){yikes_woo_toggle_how_to()}),jQuery("#add_another_tab").click(function(a){yikes_woo_add_another_tab(""),a.preventDefault()}),jQuery("body").on("click",".remove_this_tab",function(a){var b=jQuery(this),c=b.parents(".button-holder").attr("alt"),d=jQuery("#number_of_tabs").val(),e="_yikes_wc_custom_repeatable_product_tabs_tab_title_",f="_yikes_wc_custom_repeatable_product_tabs_tab_content_";if(c!==d)for(var g=parseInt(c);g<d;){var h="",i="",j=g+1;h=jQuery("#"+e+j).val(),jQuery("#"+e+g).val(h),"undefined"!=typeof tinymce?(i=tinymce.get(f+j).getContent(),tinymce.get(f+g).setContent(i),jQuery("#"+f+g).val(i)):(i=jQuery("#"+f+j).val(),jQuery("#"+f+g).val(i));var k=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+j+"_action").val(),l=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+j).val();jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+g+"_action").val(k),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+g).val(l);var m=jQuery("#_yikes_wc_override_reusable_tab_"+j).is(":checked");jQuery("#_yikes_wc_override_reusable_tab_"+g).prop("checked",m),jQuery("#_yikes_wc_override_reusable_tab_container_"+j).is(":visible")?jQuery("#_yikes_wc_override_reusable_tab_container_"+g).show():jQuery("#_yikes_wc_override_reusable_tab_container_"+g).hide(),jQuery("._yikes_wc_custom_repeatable_product_tabs_tab_title_"+j+"_field").hasClass("yikes_woo_using_reusable_tab")?yikes_woo_toggle_reusable_override_overlay("disable",g):yikes_woo_toggle_reusable_override_overlay("enable",g),g++}var e="_yikes_wc_custom_repeatable_product_tabs_tab_title_",f="_yikes_wc_custom_repeatable_product_tabs_tab_content_",n=f+d,o=jQuery("#_yikes_wc_override_reusable_tab_container_"+d),p=jQuery("."+e+d+"_field"),q=jQuery("."+f+d+"_field"),r=jQuery(".yikes-woo-custom-tab-divider").last(),s=jQuery("."+e+d+"_field").prev(".button-holder"),t=parseInt(d)-parseInt(1);"undefined"!=typeof tinymce&&tinymce.execCommand("mceRemoveEditor",!1,n),o.remove(),p.remove(),q.remove(),r.remove(),s.remove(),jQuery("#number_of_tabs").val(t),0===parseInt(t)&&jQuery("#add_another_tab").parent(".add_tabs_container").addClass("_yikes_wc_add_tab_center"),a.preventDefault()}),jQuery("body").on("click",".move-tab-data-up",function(){var a=jQuery(this),b=a.parents(".button-holder").attr("alt");if(1==b)return!1;var c="_yikes_wc_custom_repeatable_product_tabs_tab_title_",d="_yikes_wc_custom_repeatable_product_tabs_tab_content_",e=jQuery("#"+c+b).val(),f="";f="undefined"!=typeof tinymce?tinymce.get(d+b).getContent():jQuery("#"+d+b).val();var g=parseInt(b)-parseInt(1),h=jQuery("#"+c+g).val(),i="";i="undefined"!=typeof tinymce?tinymce.get(d+g).getContent():jQuery("#"+d+g).val(),jQuery("."+c+b+"_field").hasClass("yikes_woo_using_reusable_tab")&&!jQuery("."+c+g+"_field").hasClass("yikes_woo_using_reusable_tab")?(yikes_woo_toggle_reusable_override_overlay("enable",b),yikes_woo_toggle_reusable_override_overlay("disable",g)):jQuery("."+c+g+"_field").hasClass("yikes_woo_using_reusable_tab")&&!jQuery("."+c+b+"_field").hasClass("yikes_woo_using_reusable_tab")&&(yikes_woo_toggle_reusable_override_overlay("disable",b),yikes_woo_toggle_reusable_override_overlay("enable",g));var j=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b+"_action").val(),k=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b).val(),l=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+g+"_action").val(),m=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+g).val();jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b+"_action").val(l),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+g+"_action").val(j),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b).val(m),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+g).val(k),jQuery("#_yikes_wc_override_reusable_tab_"+b).is(":checked")===!0&&jQuery("#_yikes_wc_override_reusable_tab_"+g).is(":checked")===!1?(jQuery("#_yikes_wc_override_reusable_tab_"+g).prop("checked",!0),jQuery("#_yikes_wc_override_reusable_tab_"+b).prop("checked",!1)):jQuery("#_yikes_wc_override_reusable_tab_"+b).is(":checked")===!1&&jQuery("#_yikes_wc_override_reusable_tab_"+g).is(":checked")===!0&&(jQuery("#_yikes_wc_override_reusable_tab_"+g).prop("checked",!1),jQuery("#_yikes_wc_override_reusable_tab_"+b).prop("checked",!0)),jQuery("#_yikes_wc_override_reusable_tab_container_"+b).is(":visible")===!0&&jQuery("#_yikes_wc_override_reusable_tab_container_"+g).is(":visible")===!1?(jQuery("#_yikes_wc_override_reusable_tab_container_"+g).show(),jQuery("#_yikes_wc_override_reusable_tab_container_"+b).hide()):jQuery("#_yikes_wc_override_reusable_tab_container_"+b).is(":visible")===!1&&jQuery("#_yikes_wc_override_reusable_tab_container_"+g).is(":visible")===!0&&(jQuery("#_yikes_wc_override_reusable_tab_container_"+g).hide(),jQuery("#_yikes_wc_override_reusable_tab_container_"+b).show()),jQuery("#"+c+b).val(h),jQuery("#"+c+g).val(e),"undefined"!=typeof tinymce.get(d+b)?(tinymce.get(d+b).setContent(i),tinymce.get(d+g).setContent(f),jQuery("#"+d+b).val(i),jQuery("#"+d+g).val(f)):(jQuery("#"+d+b).val(i),jQuery("#"+d+g).val(f))}),jQuery("body").on("click",".move-tab-data-down",function(){var a=jQuery(this),b=a.parents(".button-holder").attr("alt"),c=jQuery("#number_of_tabs").val();if(b==c)return!1;var d="_yikes_wc_custom_repeatable_product_tabs_tab_title_",e="_yikes_wc_custom_repeatable_product_tabs_tab_content_",f=jQuery("#"+d+b).val(),g="";g="undefined"!=typeof tinymce?tinymce.get(e+b).getContent():jQuery("#"+e+b).val();var h=parseInt(b)+parseInt(1),i=jQuery("#"+d+h).val(),j="";j="undefined"!=typeof tinymce?tinymce.get(e+h).getContent():jQuery("#"+e+h).val(),jQuery("."+d+b+"_field").hasClass("yikes_woo_using_reusable_tab")&&!jQuery("."+d+h+"_field").hasClass("yikes_woo_using_reusable_tab")?(yikes_woo_toggle_reusable_override_overlay("enable",b),yikes_woo_toggle_reusable_override_overlay("disable",h)):jQuery("."+d+h+"_field").hasClass("yikes_woo_using_reusable_tab")&&!jQuery("."+d+b+"_field").hasClass("yikes_woo_using_reusable_tab")&&(yikes_woo_toggle_reusable_override_overlay("disable",b),yikes_woo_toggle_reusable_override_overlay("enable",h));var k=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b+"_action").val(),l=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b).val(),m=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+h+"_action").val(),n=jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+h).val();jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b+"_action").val(m),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+h+"_action").val(k),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+b).val(n),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+h).val(l),jQuery("#_yikes_wc_override_reusable_tab_"+b).is(":checked")===!0&&jQuery("#_yikes_wc_override_reusable_tab_"+h).is(":checked")===!1?(jQuery("#_yikes_wc_override_reusable_tab_"+h).prop("checked",!0),jQuery("#_yikes_wc_override_reusable_tab_"+b).prop("checked",!1)):jQuery("#_yikes_wc_override_reusable_tab_"+b).is(":checked")===!1&&jQuery("#_yikes_wc_override_reusable_tab_"+h).is(":checked")===!0&&(jQuery("#_yikes_wc_override_reusable_tab_"+h).prop("checked",!1),jQuery("#_yikes_wc_override_reusable_tab_"+b).prop("checked",!0)),jQuery("#_yikes_wc_override_reusable_tab_container_"+b).is(":visible")===!0&&jQuery("#_yikes_wc_override_reusable_tab_container_"+h).is(":visible")===!1?(jQuery("#_yikes_wc_override_reusable_tab_container_"+h).show(),jQuery("#_yikes_wc_override_reusable_tab_container_"+b).hide()):jQuery("#_yikes_wc_override_reusable_tab_container_"+b).is(":visible")===!1&&jQuery("#_yikes_wc_override_reusable_tab_container_"+h).is(":visible")===!0&&(jQuery("#_yikes_wc_override_reusable_tab_container_"+h).hide(),jQuery("#_yikes_wc_override_reusable_tab_container_"+b).show()),jQuery("#"+d+b).val(i),jQuery("#"+d+h).val(f),"undefined"!=typeof tinymce?(tinymce.get(e+b).setContent(j),tinymce.get(e+h).setContent(g),jQuery("#"+e+b).val(j),jQuery("#"+e+h).val(g)):(jQuery("#"+e+b).val(j),jQuery("#"+e+h).val(g))}),jQuery("body").on("click","#_yikes_wc_apply_a_saved_tab",function(){return!jQuery(this).hasClass("disabled")&&(jQuery(this).addClass("disabled"),void yikes_woo_handle_reusable_tabs())}),jQuery("body").on("click",".yikes_woo_saved_tab_selector_lity",function(){var a=jQuery(this).data("saved-tab-number"),b="_yikes_wc_custom_repeatable_product_tabs_tab_title_",c=jQuery("#yikes_woo_saved_tab_content_"+a).html(),d=jQuery("#yikes_woo_saved_tab_title_"+a).text(),e=jQuery("#saved_tab_container_"+a).data("tab-id");yikes_woo_add_another_tab(c);var f=jQuery("#number_of_tabs").val();jQuery("#"+b+f).val(d),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+f+"_action").val("add"),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+f).val(e),jQuery("#qt__yikes_wc_custom_repeatable_product_tabs_tab_content_"+f+"_toolbar").length>0?yikes_woo_toggle_reusable_override_overlay("disable",f):jQuery("#_yikes_wc_custom_repeatable_product_tabs_tab_title_"+f).addClass("yikes_woo_disable_this_tab"),jQuery("#_yikes_wc_override_reusable_tab_container_"+f).show(),global_lity.close()}),jQuery("body").on("click","._yikes_wc_override_reusable_tab",function(){var a=jQuery(this).data("tab-number");jQuery(this).is(":checked")===!0?(yikes_woo_display_feedback_messages("_yikes_wc_override_reusable_tab_container_"+a,"_yikes_wc_override_reusable_tab_message","If you override this tab it will no longer recognize global tab changes.",!1),jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+a+"_action").val("remove"),yikes_woo_toggle_reusable_override_overlay("enable",a)):(jQuery("#_yikes_wc_custom_repeatable_product_tabs_saved_tab_id_"+a+"_action").val("add"),yikes_woo_toggle_reusable_override_overlay("disable",a))}),jQuery("body").on("focusout",".yikes_woo_tabs_title_field",function(){var a=jQuery(this);if(1===parseInt(jQuery("#number_of_tabs").val()))return a.removeClass("_yikes_wc_title_red_overlay"),void a.parent(".form-field").children("._yikes_wc_duplicate_title_message").remove();var b=jQuery(this).attr("id"),c=jQuery(this).val(),d=!1;jQuery(".yikes_woo_tabs_title_field").each(function(e,f){jQuery(f).attr("id")!=b&&""!=jQuery(f).val()&&jQuery(f).val()===c&&(a.addClass("_yikes_wc_title_red_overlay"),a.parent(".form-field").children("._yikes_wc_duplicate_title_message").remove(),a.parent(".form-field").prepend('<span class="_yikes_wc_duplicate_title_message"> Please choose a unique tab name - duplicate tab names can create errors </span>'),d=!0)}),d===!1&&(jQuery("._yikes_wc_title_red_overlay").removeClass("_yikes_wc_title_red_overlay"),jQuery("._yikes_wc_duplicate_title_message").remove())}),jQuery("body").on("lity:close",function(){jQuery("#_yikes_wc_apply_a_saved_tab").removeClass("disabled")})});